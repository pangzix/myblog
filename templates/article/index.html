{% load staticfiles %}
{% load article_extras %}
<!DOCTYPE html>
<!-- 网站主语言 -->
<html lang="zh-cn">

<head>
    <!-- 网站采用的字符编码 -->
    <meta charset="utf-8">
    <!-- 预留网站标题的位置 -->
    <title> My Memo</title>
    <!-- 引入bootstrap的css文件 -->
    <script src="https://cdn.bootcss.com/font-awesome/5.11.2/js/all.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <!-- 新 Bootstrap4 核心 CSS 文件 -->
     <link rel="stylesheet" href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.css" rel="stylesheet">
     <link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.css" rel="stylesheet">
     <link rel="stylesheet" href="{% static 'md_css/monokai.css' %}">
     <link rel="stylesheet" href="{% static 'hover/hover.css' %}">
    <link rel="stylesheet" href="{% static 'wpxon-blog/myblog.css' %}">
    <link rel="stylesheet" href="{% static 'progress/progress.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body style="background-color: whitesmoke;padding-top: 70px;">
<progress id="content_progress" value="0"></progress>
 <script src="{% static 'progress/progress.js' %}"></script>

    {% include 'header.html' %}
<div id="wrapper">
<div class="container ">
<div class="container">
        <div class="row">
            <div class="col-md-8">
            {% show_columns %}
            <!--普通文章显示-->
                {% for article in articles %}

                <div class="card mb-2 hvr-glow shadow p-3 md-5 bg-white " style="display: flex">
                    <div class="row no-gutters align-items-center">
                        <div class="col">
                            {% if article.avatar %}
                            <img src="http://lesphon-1252495278.picsh.myqcloud.com/{{ article.avatar }}?imageMogr2/crop/x200/gravity/center" class="card-img-top " style="height:200px ">
                            {% endif %}
                            <div class="card-body">

                                    <span class="blog-meta__post-by">{{ article.total_views }}&nbsp;&nbsp;views</span>
                                    <span class="blog-meta__separator">|</span>
                                    <span class="blog-meta__comments"></i><!-- 修改为评论的计数 -->{{ article.comments.count }}&nbsp;&nbsp;comments</span>
                                    <span class="blog-meta__separator">|</span>
                                    <span>{{ article.created|timesince_zh }}</span>


                                <h4 class="blog-post__title">
                                <a class="text-secondary no-underline blog-post__title"   href="{% url 'article:article_detail' article.pk %}">{{ article.title }}</a>
                            </h4>
                            <p class="f-15 blog-meta__post-by">{{ article.excerpt|safe }}...</p>
                        </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="no-article">aaa</div>
                {% endfor %}

{% if articles.paginator.count > 5 %}
<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
  <!-- 如果不是第一页，则显示上翻按钮 -->
      {% if articles.has_previous %}
         <li class="page-item">
            <a class="page-link" href="?page=1" aria-label="Previous">
             <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        <li class="page-item"><a class="page-link" href="?page={{ articles.previous_page_number }}">{{ articles.previous_page_number }}</a></li>
      {% endif %}
<!--当前页 -->
        <li class="page-item"><a class="page-link" href="#">{{ articles.number }}</a></li>
  <!-- 如果不是最末页，则显示下翻按钮 -->
    {% if articles.has_next %}
        <li class="page-item">
            <a class="page-link" href="?page={{ articles.next_page_number }}">{{ articles.next_page_number }}</a>
        </li>
        <li class="page-item">
            <a class="page-link" href="?page={{ articles.paginator.num_pages }}"><span aria-hidden="true">&raquo;</span></a>
        </li>
  {% endif %}
  </ul>
</nav>
{% endif %}
            </div>

            <div class="col-md-4 sidebar" id="sidebar">
                    <div class="sidebar__inner">
                 {% show_recent_articles %}

                {% show_contactings %}

                {% show_archives %}
                    </div>
            </div>
        </div>
    </div>
</div>
<div id="push"></div>
</div>
</div>
    {% include 'footer.html' %}
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }

        #wrapper {
            min-height: 100%;
            margin-bottom: -60px;
        }

        #footer,
        #push {
            height: 60px;
        }
    </style>
<!-- 粘性侧边栏样式 -->
<style>
    .sidebar{
        will-change: min-height;
    }

    .sidebar__inner{
        transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
        will-change: position, transform;
    }
</style>
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<!-- 引入粘性侧边栏 -->
<script src="{% static 'sticky_sidebar/jquery.sticky-sidebar.min.js' %}"></script>
<script type="text/javascript">
    $('#sidebar').stickySidebar({
        topSpacing: 70,
        bottomSpacing: 20,
    });
</script>
 {% include 'back_to_top_func.html' %}
    <!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
     <script src="https://cdn.bootcss.com/popper.js/1.15.0/esm/popper.min.js"></script>
    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
        <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script></div>
</body>


</html>